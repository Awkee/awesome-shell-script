#!/bin/bash
#########################################################################
# File Name: a.sh
# Author: zwker
# mail: xiaoyu0720@gmail.com
# Created Time: 2017年03月15日 星期三 16时28分17秒
#########################################################################

#### 主动在

usage()
{
cat <<END
Usage:
	`basename $0`  <port> [dest_ip] 
	
	<port> : 需要在提供连接的主机上开放的端口;
	[dest_ip] : 连接的目标主机地址
END

}


if [ "$#" = "0" ] ; then
	usage
	exit 1
fi

A="172.21.4.115"
PA=${1:-"7001"}
UA="plat3"

#B=${2:-"10.162.202.92"}
B=${2:-"10.163.106.91"}
PB="22"

#C="172.21.4.113"
#PC="22"
#D=""

### 在A主机打开PA端口，中转到B主机的PB端口

ssh -g -R $A:$PA:$B:$PB $UA@$A

echo "------------------------------------------------------------"

